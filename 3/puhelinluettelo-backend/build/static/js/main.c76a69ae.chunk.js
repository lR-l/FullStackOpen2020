(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{21:function(e,n,t){},22:function(e,n,t){},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),a=t.n(r),o=t(15),s=t.n(o),u=(t(21),t(6)),i=t(3),d=function(e){var n=e.onChange;return Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{onChange:n})]})},l=function(e){var n=e.formProps,t=n.addName,r=n.nameChange,a=n.numberChange,o=n.newName,s=n.newNumber;return Object(c.jsxs)("form",{onSubmit:t,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:o,onChange:r})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:s,onChange:a})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},b=(t(22),t(4)),j=t.n(b),m="/api/persons",h={getPersons:function(){return j.a.get(m).then((function(e){return e.data}))},addPerson:function(e){return j.a.post(m,e).then((function(e){return e.data}))},deletePerson:function(e){return j.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.status}))},updatePerson:function(e,n){return j.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))}},f=function(e){var n=e.filter,t=e.persons,r=e.deleteName,a=n?t.filter((function(e){return e.name.toLowerCase().includes(n)})):t;return a.length>0?a.map((function(e){return Object(c.jsxs)("div",{className:"personDetails",children:[Object(c.jsx)("span",{className:"personName",children:e.name}),Object(c.jsx)("span",{className:"personNumber",children:e.number}),Object(c.jsx)("div",{className:"buttonContainer",children:Object(c.jsx)("button",{onClick:function(){return r(e.id,e.name)},children:"Delete"})})]},e.name)})):n?Object(c.jsx)("p",{children:"No results"}):Object(c.jsx)("p",{children:"Your phonebook is empty"})},O=(t(40),function(e){var n=e.data;if(null===n.message)return null;var t=n.isError?"red":"green";return Object(c.jsx)("div",{className:"notification",children:Object(c.jsx)("span",{className:"message",style:{borderColor:t},children:n.message})})}),p=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],o=Object(r.useState)(""),s=Object(i.a)(o,2),b=s[0],j=s[1],m=Object(r.useState)(""),p=Object(i.a)(m,2),x=p[0],g=p[1],v=Object(r.useState)(""),w=Object(i.a)(v,2),C=w[0],N=w[1],P=Object(r.useState)({message:null,isError:!1}),k=Object(i.a)(P,2),y=k[0],S=k[1],E=function(e,n){S({message:e,isError:n}),setTimeout((function(){S({message:null,isError:!1})}),3e3)};return Object(r.useEffect)((function(){h.getPersons().then((function(e){a(e)})).catch((function(e){return E("Unable to get phonebook data",!0)}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(d,{onChange:function(e){N(e.target.value)}}),Object(c.jsx)("h2",{children:"Add new"}),Object(c.jsx)(l,{formProps:{nameChange:function(e){j(e.target.value)},numberChange:function(e){g(e.target.value)},addName:function(e){if(e.preventDefault(),""!==b&&""!==x&&x.replaceAll("-","").match(/^\d+$/)&&0!==x.indexOf("-")&&x.indexOf("-")!==x.length-1)if(t.some((function(e){return e.name.toLowerCase()===b.toLowerCase()}))){var n=t.find((function(e){return e.name.toLowerCase()===b.toLowerCase()}));if(n.number===x)return void E("Check Old number is same as new number",!0);window.confirm("".concat(n.name," is already added to phonebook, replace old number with new one?"))&&h.updatePerson(n.id,Object(u.a)(Object(u.a)({},n),{},{number:x})).then((function(e){a(t.map((function(t){return t.id===n.id?e:t}))),j(""),g(""),E("".concat(n.name,"'s phonenumber was updated successfully"),!1)})).catch((function(e){return E("Unable to update ".concat(n.name,"'s phonenumber"),!0)}))}else h.addPerson({name:b,number:x}).then((function(e){a(t.concat(e)),j(""),g(""),E("".concat(b," added"),!1)})).catch((function(e){return E("Unable to add ".concat(b),!0)}));else E("Check details",!0)},newName:b,newNumber:x}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(f,{filter:C,persons:t,deleteName:function(e,n){window.confirm("Do you want to delete ".concat(n,"?"))&&h.deletePerson(e).then((function(c){a(t.filter((function(n){return n.id!==e}))),E("".concat(n," deleted"),!1)})).catch((function(e){console.log(e),E("Unable to delete ".concat(n),!0)}))}}),Object(c.jsx)(O,{data:y})]})};s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.c76a69ae.chunk.js.map